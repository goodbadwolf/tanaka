@use 'sass:map';
@use "../../styles/core" as core;

.toggle {
  display: inline-flex;
  align-items: center;
  gap: var(--mantine-spacing-sm);
  cursor: pointer;
  user-select: none;

  &__switch {
    position: relative;
    width: calc(var(--mantine-spacing-xl) * 1.1);
    height: calc(var(--mantine-spacing-md) * 1.5);
    background: var(--border-light);
    border-radius: var(--mantine-radius-xl);
    transition: all map.get(core.$transitions, base);
    border: var(--mantine-spacing-xs) solid var(--border);

    &::after {
      content: '';
      position: absolute;
      top: calc(var(--mantine-spacing-xs) / 2);
      left: calc(var(--mantine-spacing-xs) / 2);
      width: calc(var(--mantine-spacing-md) * 1.125);
      height: calc(var(--mantine-spacing-md) * 1.125);
      background: var(--background);
      border-radius: 50%;
      transition: all map.get(core.$transitions, base);
      box-shadow: var(--shadow-sm);
    }
  }

  &__label {
    font-size: var(--mantine-font-size-sm);
    font-weight: var(--mantine-font-weight-medium);
    color: var(--text);
  }

  &__input {
    position: absolute;
    opacity: 0;
    pointer-events: none;

    &:checked + .toggle__switch {
      background: var(--primary);
      border-color: var(--primary);

      &::after {
        transform: translateX(calc(var(--mantine-spacing-md) * 1.25));
      }
    }

    &:focus-visible + .toggle__switch {
      outline: calc(var(--mantine-spacing-xs) / 2) solid var(--primary);
      outline-offset: calc(var(--mantine-spacing-xs) / 2);
    }

    &:disabled + .toggle__switch {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  &:hover &__switch {
    background: var(--background-surface-light);
  }

  &__input:checked:hover + &__switch {
    background: var(--primary-light);
  }

  // Size variants
  &--small {
    .toggle__switch {
      width: calc(var(--mantine-spacing-xl) * 0.9);
      height: calc(var(--mantine-spacing-md) * 1.25);

      &::after {
        width: calc(var(--mantine-spacing-sm) * 1.75);
        height: calc(var(--mantine-spacing-sm) * 1.75);
      }
    }

    .toggle__input:checked + .toggle__switch::after {
      transform: translateX(var(--mantine-spacing-md));
    }

    .toggle__label {
      font-size: var(--mantine-font-size-xs);
    }
  }

  &--large {
    .toggle__switch {
      width: calc(var(--mantine-spacing-xl) * 1.3);
      height: calc(var(--mantine-spacing-lg) * 1.4);

      &::after {
        width: calc(var(--mantine-spacing-md) * 1.375);
        height: calc(var(--mantine-spacing-md) * 1.375);
      }
    }

    .toggle__input:checked + .toggle__switch::after {
      transform: translateX(calc(var(--mantine-spacing-md) * 1.5));
    }

    .toggle__label {
      font-size: var(--mantine-font-size-md);
    }
  }
}
