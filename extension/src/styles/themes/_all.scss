@use 'sass:map';
@use './base' as base;
@use './twilight';
@use './neon';
@use './midnight';

// Theme registry
$themes: (
  twilight: twilight.$twilight-theme,
  neon: neon.$neon-theme,
  midnight: midnight.$midnight-theme
);

// Default theme
$default-theme: twilight;

// Apply default theme
:root {
  @include base.apply-complete-theme(map.get($themes, $default-theme));
}

// Theme switching
@each $name, $config in $themes {
  [data-theme-style="#{$name}"] {
    @include base.apply-complete-theme($config);

    // Light mode variant
    &[data-mantine-color-scheme="light"] {
      $light-colors: map.get($config, colors-light);
      @if $light-colors {
        @include base.apply-theme($light-colors);
        // Re-map to Mantine variables for light mode
        @include base.map-to-mantine($light-colors);
      }
    }
  }
}

// Special handling for Neon theme - ensure text is always light
[data-theme-style="neon"] {
  // Force light text in all contexts
  color: var(--text);

  // Ensure all Mantine components use light text
  * {
    color: inherit;
  }

  // Specific overrides for components that might not inherit
  .mantine-Text-root,
  .mantine-Title-root,
  .mantine-Card-root,
  .mantine-Paper-root {
    color: var(--text);
  }
}
