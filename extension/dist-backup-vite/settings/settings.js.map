{"version":3,"file":"settings.js","sources":["../../src/settings/settings.ts"],"sourcesContent":["import browser from 'webextension-polyfill';\nimport { getConfig } from '../config/index.js';\n\nconst authTokenInput = document.getElementById('auth-token') as HTMLInputElement;\nconst saveAuthButton = document.getElementById('save-auth') as HTMLButtonElement;\nconst statusDiv = document.getElementById('status') as HTMLDivElement;\nconst serverInfoElement = document.getElementById('server-info') as HTMLParagraphElement;\nconst versionElement = document.getElementById('version') as HTMLSpanElement;\n\n// Load current settings\nasync function loadSettings() {\n  const settings = await browser.storage.local.get(['authToken']);\n  authTokenInput.value = (settings.authToken as string) || '';\n\n  // Show server URL\n  serverInfoElement.textContent = `Connected to: ${getConfig().serverUrl}`;\n\n  // Show version from manifest\n  const manifest = browser.runtime.getManifest();\n  versionElement.textContent = manifest.version;\n}\n\n// Save authentication\nsaveAuthButton.addEventListener('click', async () => {\n  const authToken = authTokenInput.value.trim();\n\n  if (!authToken) {\n    showStatus('Auth token is required', 'error');\n    return;\n  }\n\n  try {\n    await browser.storage.local.set({ authToken });\n\n    // Notify background script to reinitialize with new token\n    await browser.runtime.sendMessage({ type: 'SETTINGS_UPDATED' });\n\n    showStatus('Authentication saved successfully', 'success');\n  } catch (error) {\n    console.error('Error saving authentication:', error);\n    showStatus('Failed to save authentication', 'error');\n  }\n});\n\nfunction showStatus(message: string, type: 'success' | 'error') {\n  statusDiv.textContent = message;\n  statusDiv.className = `status-message ${type}`;\n  statusDiv.style.display = 'block';\n\n  setTimeout(() => {\n    statusDiv.style.display = 'none';\n  }, 3000);\n}\n\n// Initialize\nloadSettings();\n"],"names":["authTokenInput","saveAuthButton","statusDiv","serverInfoElement","versionElement","loadSettings","settings","browser","getConfig","manifest","authToken","showStatus","error","message","type"],"mappings":"2IAGA,MAAMA,EAAiB,SAAS,eAAe,YAAY,EACrDC,EAAiB,SAAS,eAAe,WAAW,EACpDC,EAAY,SAAS,eAAe,QAAQ,EAC5CC,EAAoB,SAAS,eAAe,aAAa,EACzDC,EAAiB,SAAS,eAAe,SAAS,EAGxD,eAAeC,GAAe,CAC5B,MAAMC,EAAW,MAAMC,EAAQ,QAAQ,MAAM,IAAI,CAAC,WAAW,CAAC,EAC9DP,EAAe,MAASM,EAAS,WAAwB,GAGzDH,EAAkB,YAAc,iBAAiBK,EAAA,EAAY,SAAS,GAGtE,MAAMC,EAAWF,EAAQ,QAAQ,YAAA,EACjCH,EAAe,YAAcK,EAAS,OACxC,CAGAR,EAAe,iBAAiB,QAAS,SAAY,CACnD,MAAMS,EAAYV,EAAe,MAAM,KAAA,EAEvC,GAAI,CAACU,EAAW,CACdC,EAAW,yBAA0B,OAAO,EAC5C,MAAA,CAGF,GAAI,CACF,MAAMJ,EAAQ,QAAQ,MAAM,IAAI,CAAE,UAAAG,EAAW,EAG7C,MAAMH,EAAQ,QAAQ,YAAY,CAAE,KAAM,mBAAoB,EAE9DI,EAAW,oCAAqC,SAAS,CAAA,OAClDC,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EACnDD,EAAW,gCAAiC,OAAO,CAAA,CAEvD,CAAC,EAED,SAASA,EAAWE,EAAiBC,EAA2B,CAC9DZ,EAAU,YAAcW,EACxBX,EAAU,UAAY,kBAAkBY,CAAI,GAC5CZ,EAAU,MAAM,QAAU,QAE1B,WAAW,IAAM,CACfA,EAAU,MAAM,QAAU,MAAA,EACzB,GAAI,CACT,CAGAG,EAAA"}