<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tanaka - Notification System</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/notifications.css">
  </head>
  <body>
    <!-- Demo Container -->
    <div class="demo-container">
      <div class="demo-header">
        <h1 class="demo-title">Tanaka Notification System</h1>
        <p class="demo-subtitle">Consistent feedback across all interfaces</p>
      </div>

      <!-- Trigger Buttons -->
      <div class="trigger-grid">
        <button class="trigger-button" onclick="showNotification('success')">
          ‚úÖ Success Notification
        </button>
        <button class="trigger-button" onclick="showNotification('error')">
          ‚ùå Error Notification
        </button>
        <button class="trigger-button" onclick="showNotification('warning')">
          ‚ö†Ô∏è Warning Notification
        </button>
        <button class="trigger-button" onclick="showNotification('info')">
          ‚ÑπÔ∏è Info Notification
        </button>
        <button class="trigger-button" onclick="showNotification('loading')">
          ‚è≥ Loading Notification
        </button>
        <button class="trigger-button" onclick="showNotification('action')">
          üéØ Action Required
        </button>
        <button class="trigger-button" onclick="showMultiple()">üìö Multiple Notifications</button>
        <button class="trigger-button" onclick="showPersistent()">
          üìå Persistent Notification
        </button>
        <button class="trigger-button" onclick="showProgress()">üìä Progress Notification</button>
        <button class="trigger-button" onclick="showInApp()">üì± In-App Notification</button>
        <button class="trigger-button" onclick="showInlineToast()">üí¨ Inline Toast</button>
        <button class="trigger-button" onclick="clearAll()">üóëÔ∏è Clear All</button>
      </div>

      <!-- In-App Notification Demo -->
      <div id="appNotificationDemo"></div>

      <!-- Queue Demo -->
      <div class="queue-demo">
        <h2 class="queue-title">Notification Behavior</h2>
        <div class="queue-info">
          <p>‚Ä¢ Notifications stack vertically with smooth animations</p>
          <p>‚Ä¢ Auto-dismiss after 5 seconds (configurable)</p>
          <p>‚Ä¢ Maximum 5 notifications shown at once</p>
          <p>‚Ä¢ Click actions close the notification</p>
          <p>‚Ä¢ Persistent notifications require manual dismissal</p>
          <p>‚Ä¢ Progress notifications update in real-time</p>
        </div>
      </div>

      <!-- Code Examples -->
      <div class="code-section">
        <h2 class="queue-title">Implementation Examples</h2>

        <div class="code-block">
          <span class="code-comment">// Basic notification</span><br />
          <span class="code-keyword">const</span> notification =
          <span class="code-function">showNotification</span>({<br />
          &nbsp;&nbsp;type: <span class="code-string">'success'</span>,<br />
          &nbsp;&nbsp;title: <span class="code-string">'Sync Complete'</span>,<br />
          &nbsp;&nbsp;message: <span class="code-string">'All tabs synchronized successfully'</span
          ><br />
          });<br /><br />

          <span class="code-comment">// With actions</span><br />
          <span class="code-function">showNotification</span>({<br />
          &nbsp;&nbsp;type: <span class="code-string">'warning'</span>,<br />
          &nbsp;&nbsp;title: <span class="code-string">'Connection Lost'</span>,<br />
          &nbsp;&nbsp;message: <span class="code-string">'Unable to reach sync server'</span>,<br />
          &nbsp;&nbsp;actions: [<br />
          &nbsp;&nbsp;&nbsp;&nbsp;{ label: <span class="code-string">'Retry'</span>, primary:
          <span class="code-keyword">true</span>, onClick: () => sync() },<br />
          &nbsp;&nbsp;&nbsp;&nbsp;{ label: <span class="code-string">'Settings'</span>, onClick: ()
          => openSettings() }<br />
          &nbsp;&nbsp;]<br />
          });<br /><br />

          <span class="code-comment">// Progress notification</span><br />
          <span class="code-keyword">const</span> progress =
          <span class="code-function">showProgress</span>({<br />
          &nbsp;&nbsp;title: <span class="code-string">'Syncing tabs...'</span>,<br />
          &nbsp;&nbsp;message: <span class="code-string">'0 of 47 tabs'</span>,<br />
          &nbsp;&nbsp;progress: <span class="code-string">0</span><br />
          });<br /><br />
          <span class="code-comment">// Update progress</span><br />
          progress.<span class="code-function">update</span>({ progress:
          <span class="code-string">50</span>, message:
          <span class="code-string">'24 of 47 tabs'</span> });
        </div>
      </div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Inline Toast Demo Container -->
    <div
      id="inlineToastDemo"
      class="inline-toast-demo-container"
    ></div>

    <script>
      // Notification System
      class NotificationSystem {
        constructor() {
          this.container = document.getElementById('notificationContainer');
          this.notifications = new Map();
          this.maxNotifications = 5;
        }

        show(options) {
          const id = Date.now() + Math.random();
          const notification = this.createNotification(id, options);

          // Add to container
          this.container.appendChild(notification);
          this.notifications.set(id, notification);

          // Manage queue
          this.manageQueue();

          // Auto dismiss
          if (!options.persistent && options.duration !== 0) {
            setTimeout(() => this.dismiss(id), options.duration || 5000);
          }

          // Return control object
          return {
            dismiss: () => this.dismiss(id),
            update: (updates) => this.update(id, updates),
          };
        }

        createNotification(id, options) {
          const div = document.createElement('div');
          div.className = `notification ${options.type || 'info'}`;
          div.dataset.id = id;

          // Icon
          const icon = document.createElement('div');
          icon.className = 'notification-icon';
          icon.textContent = this.getIcon(options.type);
          div.appendChild(icon);

          // Content
          const content = document.createElement('div');
          content.className = 'notification-content';

          if (options.title) {
            const title = document.createElement('div');
            title.className = 'notification-title';
            title.textContent = options.title;
            content.appendChild(title);
          }

          if (options.message) {
            const message = document.createElement('div');
            message.className = 'notification-message';
            message.textContent = options.message;
            content.appendChild(message);
          }

          // Actions
          if (options.actions) {
            const actions = document.createElement('div');
            actions.className = 'notification-actions';

            options.actions.forEach((action) => {
              const button = document.createElement('button');
              button.className = `notification-action ${action.primary ? 'primary' : ''}`;
              button.textContent = action.label;
              button.onclick = () => {
                if (action.onClick) action.onClick();
                this.dismiss(id);
              };
              actions.appendChild(button);
            });

            content.appendChild(actions);
          }

          div.appendChild(content);

          // Close button
          if (!options.hideClose) {
            const close = document.createElement('button');
            close.className = 'notification-close';
            close.textContent = '‚úï';
            close.onclick = () => this.dismiss(id);
            div.appendChild(close);
          }

          // Progress bar
          if (options.progress !== undefined) {
            const progress = document.createElement('div');
            progress.className = 'notification-progress';
            const bar = document.createElement('div');
            bar.className = 'notification-progress-bar';
            bar.style.width = `${options.progress}%`;
            progress.appendChild(bar);
            div.appendChild(progress);
          }

          return div;
        }

        getIcon(type) {
          const icons = {
            success: '‚úì',
            error: '‚úï',
            warning: '!',
            info: 'i',
            loading: '‚ü≥',
          };
          return icons[type] || icons.info;
        }

        dismiss(id) {
          const notification = this.notifications.get(id);
          if (!notification) return;

          notification.classList.add('slide-out');
          setTimeout(() => {
            notification.remove();
            this.notifications.delete(id);
          }, 300);
        }

        update(id, updates) {
          const notification = this.notifications.get(id);
          if (!notification) return;

          if (updates.message) {
            const message = notification.querySelector('.notification-message');
            if (message) message.textContent = updates.message;
          }

          if (updates.progress !== undefined) {
            const bar = notification.querySelector('.notification-progress-bar');
            if (bar) bar.style.width = `${updates.progress}%`;
          }
        }

        manageQueue() {
          const all = Array.from(this.notifications.values());
          if (all.length > this.maxNotifications) {
            const toRemove = all.slice(0, all.length - this.maxNotifications);
            toRemove.forEach((n) => {
              const id = n.dataset.id;
              this.dismiss(id);
            });
          }
        }

        clear() {
          this.notifications.forEach((_, id) => this.dismiss(id));
        }
      }

      // Initialize system
      const notificationSystem = new NotificationSystem();

      // Demo functions
      function showNotification(type) {
        const messages = {
          success: {
            title: 'Sync Complete!',
            message: 'Successfully synchronized 47 tabs across 3 devices',
          },
          error: {
            title: 'Connection Failed',
            message: 'Unable to connect to sync server. Check your network settings.',
          },
          warning: {
            title: 'Sync Delayed',
            message: 'Large number of operations pending. This may take a moment.',
          },
          info: {
            title: 'New Device Connected',
            message: 'Home Desktop has joined your sync network',
          },
          loading: {
            title: 'Syncing...',
            message: 'Processing tab operations',
            hideClose: true,
          },
          action: {
            title: 'Merge Conflict',
            message: 'Tab "Project Dashboard" was modified on multiple devices',
            actions: [
              { label: 'Keep Local', primary: true, onClick: () => console.log('Keep local') },
              { label: 'Keep Remote', onClick: () => console.log('Keep remote') },
            ],
          },
        };

        notificationSystem.show({ type, ...messages[type] });
      }

      function showMultiple() {
        const types = ['success', 'info', 'warning'];
        types.forEach((type, index) => {
          setTimeout(() => showNotification(type), index * 200);
        });
      }

      function showPersistent() {
        notificationSystem.show({
          type: 'error',
          title: 'Authentication Required',
          message: 'Your session has expired. Please re-enter your auth token.',
          persistent: true,
          actions: [
            {
              label: 'Open Settings',
              primary: true,
              onClick: () => console.log('Opening settings'),
            },
          ],
        });
      }

      function showProgress() {
        const progress = notificationSystem.show({
          type: 'info',
          title: 'Syncing tabs...',
          message: '0 of 47 tabs',
          progress: 0,
          hideClose: true,
        });

        let current = 0;
        const interval = setInterval(() => {
          current += 10;
          progress.update({
            progress: current,
            message: `${Math.round(current * 0.47)} of 47 tabs`,
          });

          if (current >= 100) {
            clearInterval(interval);
            progress.dismiss();
            showNotification('success');
          }
        }, 300);
      }

      function showInApp() {
        const demo = document.getElementById('appNotificationDemo');
        demo.innerHTML = `
                <div class="app-notification">
                    <div class="app-notification-content">
                        <div class="app-notification-icon">‚ÑπÔ∏è</div>
                        <div class="app-notification-text">
                            You have unsaved changes. Sync now to save them to the server.
                        </div>
                    </div>
                    <button class="app-notification-action" onclick="this.parentElement.remove()">
                        Sync Now
                    </button>
                </div>
            `;
      }

      function showInlineToast() {
        const demo = document.getElementById('inlineToastDemo');
        demo.innerHTML = `
                <div class="inline-toast">
                    <div class="inline-toast-icon">‚úì</div>
                    <div class="inline-toast-text">Window tracking enabled</div>
                </div>
            `;

        setTimeout(() => {
          demo.innerHTML = '';
        }, 3000);
      }

      function clearAll() {
        notificationSystem.clear();
        document.getElementById('appNotificationDemo').innerHTML = '';
        document.getElementById('inlineToastDemo').innerHTML = '';
      }
    </script>
  </body>
</html>
