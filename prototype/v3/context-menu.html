<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tanaka - Context Menu</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/animations.css" />
    <link rel="stylesheet" href="css/utilities.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="stylesheet" href="css/context-menu.css" />
  </head>
  <body>
    <div class="demo-container">
      <div class="demo-header">
        <h1 class="demo-title">Tanaka Context Menu</h1>
        <p class="demo-subtitle">Quick actions from the extension icon</p>
      </div>

      <!-- Browser Mockup -->
      <div class="browser-mockup">
        <div class="browser-header">
          <div class="traffic-lights">
            <div class="traffic-light red"></div>
            <div class="traffic-light yellow"></div>
            <div class="traffic-light green"></div>
          </div>
          <div class="url-bar">https://example.com</div>
          <div class="toolbar">
            <div class="toolbar-button">
              <span>‚Üê</span>
            </div>
            <div class="toolbar-button">
              <span>‚Üí</span>
            </div>
            <div class="toolbar-button">
              <span>‚ü≥</span>
            </div>
            <div class="toolbar-button" id="extensionButton" onclick="toggleContextMenu()">
              <div class="extension-icon">T</div>
              <span class="tooltip">Right-click for quick actions</span>
            </div>
          </div>
        </div>
        <div class="browser-content">
          <span>üåê</span>

          <!-- Context Menu -->
          <div class="context-menu" id="contextMenu">
            <!-- Sync Status -->
            <div class="sync-status-header">
              <div class="sync-info">
                <span class="sync-indicator"></span>
                <div>
                  <div class="sync-text">All synced</div>
                  <div class="sync-time">Last sync: 2 min ago</div>
                </div>
              </div>
            </div>

            <!-- Quick Stats -->
            <div class="quick-stats">
              <div class="stat-item">
                <div class="stat-value">3</div>
                <div class="stat-label">Windows</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">47</div>
                <div class="stat-label">Tabs</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">2</div>
                <div class="stat-label">Devices</div>
              </div>
            </div>

            <!-- Primary Actions -->
            <div class="menu-section">
              <div class="menu-item primary" onclick="handleAction('track')">
                <div class="menu-icon">üéØ</div>
                <div class="menu-content">
                  <div class="menu-label">Track Current Window</div>
                  <div class="menu-description">Start syncing this window</div>
                </div>
              </div>
            </div>

            <!-- Quick Actions -->
            <div class="menu-section">
              <div class="menu-item" onclick="handleAction('sync')">
                <div class="menu-icon">üîÑ</div>
                <div class="menu-content">
                  <div class="menu-label">Sync Now</div>
                </div>
                <div class="keyboard-hint">
                  <span class="key">‚åò</span>
                  <span class="key">S</span>
                </div>
              </div>

              <div class="menu-item" onclick="handleAction('search')">
                <div class="menu-icon">üîç</div>
                <div class="menu-content">
                  <div class="menu-label">Search Tabs</div>
                </div>
                <div class="keyboard-hint">
                  <span class="key">‚åò</span>
                  <span class="key">K</span>
                </div>
              </div>

              <div class="menu-item has-submenu" onclick="handleAction('windows')">
                <div class="menu-icon">ü™ü</div>
                <div class="menu-content">
                  <div class="menu-label">Switch Window</div>
                </div>
                <span class="menu-badge">3</span>
              </div>
            </div>

            <!-- Management -->
            <div class="menu-section">
              <div class="menu-item" onclick="handleAction('activity')">
                <div class="menu-icon">üìä</div>
                <div class="menu-content">
                  <div class="menu-label">View Activity</div>
                  <div class="menu-description">Sync history & timeline</div>
                </div>
              </div>

              <div class="menu-item" onclick="handleAction('manage')">
                <div class="menu-icon">üìë</div>
                <div class="menu-content">
                  <div class="menu-label">Manage All Tabs</div>
                  <div class="menu-description">Open tab manager</div>
                </div>
              </div>
            </div>

            <!-- Settings -->
            <div class="menu-section">
              <div class="menu-item" onclick="handleAction('settings')">
                <div class="menu-icon">‚öôÔ∏è</div>
                <div class="menu-content">
                  <div class="menu-label">Settings</div>
                </div>
              </div>

              <div class="menu-item" onclick="handleAction('help')">
                <div class="menu-icon">‚ùì</div>
                <div class="menu-content">
                  <div class="menu-label">Help & Support</div>
                </div>
              </div>

              <div class="menu-separator"></div>

              <div class="menu-item disabled">
                <div class="menu-icon">üö´</div>
                <div class="menu-content">
                  <div class="menu-label">Pause Syncing</div>
                  <div class="menu-description">Temporarily disable sync</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="demo-instructions">
        <p>
          Click the Tanaka extension icon (T) to see the context menu. In Firefox, this menu appears when right-clicking
          the extension icon.
        </p>
      </div>
    </div>

    <script>
      let menuOpen = false;

      function toggleContextMenu() {
        const menu = document.getElementById("contextMenu");
        const button = document.getElementById("extensionButton");

        if (menuOpen) {
          menu.classList.remove("show");
          menuOpen = false;
        } else {
          menu.classList.add("show");
          menuOpen = true;

          // Simulate right-click feedback
          button.style.transform = "scale(0.95)";
          setTimeout(() => {
            button.style.transform = "";
          }, 100);
        }
      }

      // Close menu when clicking outside
      document.addEventListener("click", (e) => {
        const menu = document.getElementById("contextMenu");
        const button = document.getElementById("extensionButton");

        if (menuOpen && !menu.contains(e.target) && e.target !== button && !button.contains(e.target)) {
          menu.classList.remove("show");
          menuOpen = false;
        }
      });

      function handleAction(action) {
        console.log("Action:", action);

        // Simulate action feedback
        const item = event.currentTarget;
        item.style.background = "rgba(99, 102, 241, 0.3)";

        setTimeout(() => {
          item.style.background = "";
          toggleContextMenu();
        }, 150);
      }

      // Simulate sync states
      const syncIndicator = document.querySelector(".sync-indicator");
      const syncText = document.querySelector(".sync-text");
      const syncTime = document.querySelector(".sync-time");

      let syncStates = [
        { class: "", text: "All synced", time: "Last sync: 2 min ago" },
        { class: "syncing", text: "Syncing...", time: "In progress" },
        { class: "error", text: "Sync error", time: "Connection failed" },
      ];

      let currentState = 0;

      setInterval(() => {
        currentState = (currentState + 1) % syncStates.length;
        const state = syncStates[currentState];

        syncIndicator.className = `sync-indicator ${state.class}`;
        syncText.textContent = state.text;
        syncTime.textContent = state.time;
      }, 3000);

      // Update stats randomly
      function updateStats() {
        const stats = document.querySelectorAll(".stat-value");
        stats[0].textContent = Math.floor(Math.random() * 5) + 1; // Windows
        stats[1].textContent = Math.floor(Math.random() * 50) + 20; // Tabs
        stats[2].textContent = Math.floor(Math.random() * 3) + 1; // Devices
      }

      setInterval(updateStats, 5000);
    </script>
  </body>
</html>
